<!DOCTYPE html>
<html lang=en-US>

<head>
    <link rel="stylesheet" type="text/css" href="./Styles/signUp.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous" />
    <!-- Places API-->
    <script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA3XfuMJJGzaU8TUItQM7XWD4esZdbpgtA&libraries=places"></script>
    <meta charset="utf-8">
    <meta id="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> Sign Up </title>
</head>


<header>
    <script src="./Scripts/navbar.js"></script>
</header>

<body onload="load(); loadAddress();"></body>
<div class="content">
    <h3 class="text-center">Join Today and Be a Learning Animal!</h3>
    <div class="vertical-center">
        <div class="row">
            <div class="col-sm" id="formtitle">
                <label class="underlineHover"> Sign-Up Required</label>
            </div>
        </div>
        <div class="container">
            <form id="myForm">
                <div class="row align-items-start">
                    <div class="col-sm-6">
                        <fieldset>
                            <div class="row">
                                <legend> Contact Info.</legend>
                                <div class="col-sm">
                                    <label for="firstname"><span class="badge badge-pill badge-info">First Name:
                                        </span></label><input type="text" id="firstname" placeholder="First Name"
                                        oninput="store();" onkeyup = "checkDuplicate(this);" onchange = "checkDuplicate(this);" required>
                                </div>
                                <div class="col-sm">
                                    <label for=middlename"><span class="badge badge-pill badge-info"> Middle
                                            Name:</span></label><input type="text" id="middlename"
                                        placeholder="Middle Name" oninput="store();" onkeyup = "checkDuplicate(this);" onchange = "checkDuplicate(this);" >
                                </div>
                                <div class="col-sm">
                                    <label for="lastname"><span class="badge badge-pill badge-info"> Last
                                            Name:</span></label><input type="text" id="lastname" placeholder="Last Name"
                                        oninput="store();" onkeyup = "checkDuplicate(this);" onchange = "checkDuplicate(this);" required><br>
                                </div>
                            </div>

                            <label for="phonenum"><span class="badge badge-pill badge-info">Phone
                                    Number:</span></label><input type="tel" pattern="[0-9]{9}|[0-9]{10}" id="phonenum"
                                placeholder=" 9 or 10 Digit #" oninput="store();" required>
                            <label for="email"> <span class="badge badge-pill badge-info">E-mail
                                    Address:</span></label><input type="email" id="email" placeholder="Enter your email"
                                oninput="store();" required><br>
                        </fieldset>
                    </div>

                    <div class="col-sm-6" id="field2">
                        <fieldset>
                            <legend> Personal Info.</legend>
                            <label for="sex"><span class="badge badge-pill badge-info">Sex:</span></label>
                            <select id="sex" oninput="store();" required>
                                <option value="" selected disabled hidden>Choose here</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                                <option value="other">Prefer Not to Answer</option>
                            </select><br>
                            <label for="age"><span class="badge badge-pill badge-info">Age:</span></label><input
                                type="number" id="age" id="age" min="16" max="100" placeholder=21 oninput="store();"
                                required><br>
                            <label for="faveCandy"><span class="badge badge-pill badge-info"> Favorite Candy:
                                </span></label>
                            <div class="candy">
                                <input type="radio" name="faveCandy" id="Snickers" oninput="storeRadio();">Snickers
                                <input type="radio" name="faveCandy" id="Gummy" oninput="storeRadio();">Gummy
                                Bears
                                <input type="radio" name="faveCandy" id="Twix" oninput="storeRadio();" checked>Twix
                                <script> localStorage.setItem("faveCandy", "Twix"); </script>

                            </div>
                        </fieldset>
                    </div>
                    <div class="col-sm-12" id="field3" onload="loadAddress()">
                        <fieldset>
                            <legend>Address Info.</legend>
                            <!-- Using Places API for Address Autocomplete-->
                            <label for="address"> <span class="badge badge-pill badge-info">
                                    Address (Autofill):</span></label>
                            <input type="text" id="address" onkeypress="store();" onmouseover="loadAddress();"
                                required />

                            <label for="street"> <span class="badge badge-pill badge-info">
                                    Street:</span></label>
                            <input type="text" id="street" onchange="store();" required />

                            <label for="zipcode"> <span class="badge badge-pill badge-info">
                                    ZipCode:</span></label>
                            <input type="text" pattern="[0-9]{5}" id="zipcode" onchange="store();" required />

                            <label for="state"> <span class="badge badge-pill badge-info">
                                    State:</span></label>
                            <input type="text" id="state" onchange="store();" required />

                            <label for="country"> <span class="badge badge-pill badge-info">
                                    Country:</span></label>
                            <input type="text" id="country" onchange="store();" value="United States" readonly />
                        </fieldset>


                        <input type="submit" class="button" value="Submit">
                        <input type="reset" value="Reset" onclick="localStorage.clear();">



                    </div>
                </div>
            </form>
        </div>
    </div>
</div>


<!-- Modal and Redirect on Submit-->
<div class="modal fade" tabindex="-1" role="dialog" id="myModal">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title"> Submission Successful!</h4>
            </div>
            <div class="modal-body">
              <p>Thank you for your comment!</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" onclick="document.location.href='./intro.html';">Close</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- / -->


<!-- Using the Google Places API-->
<script>
    var input = document.getElementById('address');
    var options = {
        types: ["geocode"], //Disambigurate results where location specified may be indeterminate
        componentRestrictions: { country: "us" } // Restrict to the US
    };
    var autocomplete = new google.maps.places.Autocomplete(input, options);
    google.maps.event.addListener(autocomplete, 'place_changed', function () {
        var place = autocomplete.getPlace();
        var zipCode, route, admin1, country; //location variables
        var obj = { type: 'value' };
        var placeObj = JSON.stringify(place);
        var formattedObj = JSON.parse(placeObj);
        console.log(formattedObj);
        var formatted = formattedObj.formatted_address;
        //Retrieve the length of address components
        var addressLen = formattedObj.address_components.length;
        //console.log(addressLen);

        for (let index = 0; index < addressLen; index++) {
            if (formattedObj.address_components[index].types == "postal_code") {
                zipcode = formattedObj.address_components[index];
                zipcode = zipcode.long_name;
                obj = { zipcode: zipcode };
                storeType(obj);
            }
            else if (formattedObj.address_components[index].types == "route") {
                street = formattedObj.address_components[index];
                street = street.long_name;
                obj = { street: street };
                storeType(obj);
            }
            else if (formattedObj.address_components[index].types.includes("administrative_area_level_1")) {
                state = formattedObj.address_components[index];
                state = state.long_name;
                obj = { state: state };
                storeType(obj);

            } else if (formattedObj.address_components[index].types.includes("country")) {
                country = formattedObj.address_components[index];
                country = country.long_name;
                obj = { country: country };
                storeType(obj);
            }
        }
        storePlace(formatted); //the address displayed, not the text entered
    })

</script>



<!-- Footer-->
<script src="./Scripts/footer.js"></script>


<!--Scripts at end so that page may be displayed first followed by the JS-->

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
<script src="./Scripts/signUp.js"></script>
</body>

</html>